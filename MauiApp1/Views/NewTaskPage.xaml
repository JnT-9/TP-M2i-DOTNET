<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:MauiApp1.ViewModels"
             x:Class="MauiApp1.Views.NewTaskPage"
             x:DataType="viewmodels:NewTaskViewModel"
             BackgroundColor="#f5f5f5"
             Title="New Task">

    <ScrollView>
        <Grid RowDefinitions="Auto,*,Auto" Padding="16">
            <!-- En-tête -->
            <Frame Grid.Row="0"
                   Margin="0,0,0,16"
                   Padding="16"
                   CornerRadius="10"
                   BorderColor="Transparent"
                   BackgroundColor="White"
                   HasShadow="True">
                <Label Text="Create New Task" 
                       FontSize="24" 
                       FontAttributes="Bold"
                       TextColor="#333333"
                       HorizontalOptions="Center" />
            </Frame>
            
            <!-- Formulaire -->
            <Frame Grid.Row="1"
                   Margin="0,0,0,16"
                   Padding="20"
                   CornerRadius="10"
                   BorderColor="Transparent"
                   BackgroundColor="White"
                   HasShadow="True">
                <VerticalStackLayout Spacing="16">
                    <!-- Titre -->
                    <VerticalStackLayout Spacing="8">
                        <Label Text="Title" 
                               FontAttributes="Bold"
                               TextColor="#333333" />
                        <Border Stroke="#e0e0e0"
                                StrokeThickness="1"
                                StrokeShape="RoundRectangle 8"
                                Padding="10,0">
                            <Entry Text="{Binding Title}" 
                                   Placeholder="Enter task title"
                                   PlaceholderColor="#aaaaaa"
                                   TextColor="#333333" />
                        </Border>
                    </VerticalStackLayout>
                    
                    <!-- Description -->
                    <VerticalStackLayout Spacing="8">
                        <Label Text="Description" 
                               FontAttributes="Bold"
                               TextColor="#333333" />
                        <Border Stroke="#e0e0e0"
                                StrokeThickness="1"
                                StrokeShape="RoundRectangle 8"
                                Padding="10,5">
                            <Editor Text="{Binding Description}" 
                                    Placeholder="Enter task description" 
                                    PlaceholderColor="#aaaaaa"
                                    TextColor="#333333"
                                    HeightRequest="100"
                                    AutoSize="TextChanges" />
                        </Border>
                    </VerticalStackLayout>
                    
                    <!-- Priorité -->
                    <VerticalStackLayout Spacing="8">
                        <Label Text="Priority" 
                               FontAttributes="Bold"
                               TextColor="#333333" />
                        <Border Stroke="#e0e0e0"
                                StrokeThickness="1"
                                StrokeShape="RoundRectangle 8"
                                Padding="10,0">
                            <Picker ItemsSource="{Binding Priorities}" 
                                    SelectedItem="{Binding Priority}"
                                    Title="Select priority"
                                    TextColor="#333333" />
                        </Border>
                    </VerticalStackLayout>
                    
                    <!-- Date d'échéance -->
                    <VerticalStackLayout Spacing="8">
                        <Label Text="Due Date" 
                               FontAttributes="Bold"
                               TextColor="#333333" />
                        <Border Stroke="#e0e0e0"
                                StrokeThickness="1"
                                StrokeShape="RoundRectangle 8"
                                Padding="10,0">
                            <DatePicker Date="{Binding DueDate}"
                                        Format="dd/MM/yyyy"
                                        TextColor="#333333" />
                        </Border>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Frame>
            
            <!-- Boutons d'action -->
            <Grid Grid.Row="2" 
                  ColumnDefinitions="*,*" 
                  ColumnSpacing="16">
                <Button Grid.Column="0"
                        Text="Create" 
                        Command="{Binding CreateTaskCommand}" 
                        IsEnabled="{Binding IsBusy, Converter={StaticResource InvertedBoolConverter}}"
                        BackgroundColor="#4CAF50"
                        TextColor="White"
                        FontAttributes="Bold"
                        HeightRequest="50"
                        CornerRadius="25" />
                
                <Button Grid.Column="1"
                        Text="Cancel" 
                        Command="{Binding CancelCommand}" 
                        IsEnabled="{Binding IsBusy, Converter={StaticResource InvertedBoolConverter}}"
                        BackgroundColor="#9e9e9e"
                        TextColor="White"
                        FontAttributes="Bold"
                        HeightRequest="50"
                        CornerRadius="25" />
            </Grid>
            
            <!-- Indicateur d'activité -->
            <ActivityIndicator Grid.Row="1"
                               IsRunning="{Binding IsBusy}" 
                               IsVisible="{Binding IsBusy}"
                               HorizontalOptions="Center"
                               VerticalOptions="Center"
                               Color="#2196F3" />
        </Grid>
    </ScrollView>
</ContentPage> 